{% extends "base.html" %}

{% block title %}Documentation - Scalable Thread Management Library{% endblock %}

{% block content %}
<div class="documentation-header text-center mb-5">
    <h1 class="display-4">Documentation</h1>
    <p class="lead">Learn how to use the Scalable Thread Management Library effectively</p>
</div>

<div class="row">
    <!-- Navigation Sidebar -->
    <div class="col-md-3">
        <div class="card sticky-top" style="top: 20px;">
            <div class="card-body">
                <h5 class="card-title">Quick Links</h5>
                <div class="list-group">
                    <a href="#installation" class="list-group-item list-group-item-action">Installation</a>
                    <a href="#quick-start" class="list-group-item list-group-item-action">Quick Start</a>
                    <a href="#api-reference" class="list-group-item list-group-item-action">API Reference</a>
                    <a href="#examples" class="list-group-item list-group-item-action">Examples</a>
                    <a href="#best-practices" class="list-group-item list-group-item-action">Best Practices</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="col-md-9">
        <!-- Installation Section -->
        <section id="installation" class="mb-5">
            <h2>Installation</h2>
            <div class="card">
                <div class="card-body">
                    <h5>Using pip</h5>
                    <pre><code class="language-bash">pip install thread-manager</code></pre>
                    
                    <h5>From source</h5>
                    <pre><code class="language-bash">git clone https://github.com/yourusername/thread-manager.git
cd thread-manager
python setup.py install</code></pre>
                </div>
            </div>
        </section>

        <!-- Quick Start Section -->
        <section id="quick-start" class="mb-5">
            <h2>Quick Start</h2>
            <div class="card">
                <div class="card-body">
                    <h5>Basic Usage</h5>
                    <pre><code class="language-python">from thread_manager import ThreadManager

# Initialize the thread manager
manager = ThreadManager(max_threads=4)

# Add tasks to the queue
manager.add_task(my_function, args=(arg1, arg2))

# Start processing tasks
manager.start()

# Wait for all tasks to complete
manager.wait()</code></pre>
                </div>
            </div>
        </section>

        <!-- API Reference Section -->
        <section id="api-reference" class="mb-5">
            <h2>API Reference</h2>
            
            <div class="card mb-3">
                <div class="card-body">
                    <h5>ThreadManager Class</h5>
                    <p>The main class for managing threads and tasks.</p>
                    
                    <h6>Constructor</h6>
                    <pre><code class="language-python">ThreadManager(max_threads=4, queue_size=100)</code></pre>
                    <ul>
                        <li><code>max_threads</code>: Maximum number of concurrent threads</li>
                        <li><code>queue_size</code>: Maximum size of the task queue</li>
                    </ul>

                    <h6>Methods</h6>
                    <ul>
                        <li><code>add_task(func, args=(), kwargs={})</code>: Add a task to the queue</li>
                        <li><code>start()</code>: Start processing tasks</li>
                        <li><code>stop()</code>: Stop all threads gracefully</li>
                        <li><code>wait()</code>: Wait for all tasks to complete</li>
                        <li><code>get_metrics()</code>: Get performance metrics</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Examples Section -->
        <section id="examples" class="mb-5">
            <h2>Examples</h2>
            
            <div class="card mb-3">
                <div class="card-body">
                    <h5>Basic Example</h5>
                    <pre><code class="language-python">from thread_manager import ThreadManager
import time

def process_data(data):
    time.sleep(1)  # Simulate work
    return data * 2

manager = ThreadManager(max_threads=2)
for i in range(5):
    manager.add_task(process_data, args=(i,))

manager.start()
results = manager.wait()
print(results)  # [0, 2, 4, 6, 8]</code></pre>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-body">
                    <h5>Advanced Example</h5>
                    <pre><code class="language-python">from thread_manager import ThreadManager
import concurrent.futures

def process_image(image_path):
    # Process image here
    return processed_image

manager = ThreadManager(max_threads=4)
image_paths = ['image1.jpg', 'image2.jpg', 'image3.jpg']

# Add tasks with error handling
for path in image_paths:
    manager.add_task(
        process_image,
        args=(path,),
        error_callback=lambda e: print(f"Error processing image: {e}")
    )

# Start processing with timeout
try:
    results = manager.wait(timeout=30)
except concurrent.futures.TimeoutError:
    print("Processing timed out")
    manager.stop()</code></pre>
                </div>
            </div>
        </section>

        <!-- Best Practices Section -->
        <section id="best-practices" class="mb-5">
            <h2>Best Practices</h2>
            <div class="card">
                <div class="card-body">
                    <ul>
                        <li>Always use error handling when adding tasks</li>
                        <li>Set appropriate timeouts for long-running tasks</li>
                        <li>Monitor system resources to avoid overloading</li>
                        <li>Use the metrics API to optimize thread count</li>
                        <li>Implement graceful shutdown in your applications</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</div>

<div class="cta-section text-center mt-5 py-5 bg-light">
    <h2>Need More Help?</h2>
    <p class="lead">Check out our interactive demo or contact our support team</p>
    <div class="mt-3">
        <a href="/dashboard" class="btn btn-primary btn-lg me-2">Try Demo</a>
        <a href="/contact" class="btn btn-outline-primary btn-lg">Contact Support</a>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    pre {
        background-color: #f8f9fa;
        padding: 1rem;
        border-radius: 0.25rem;
    }
    
    .sticky-top {
        z-index: 1020;
    }
    
    section {
        scroll-margin-top: 20px;
    }
</style>
{% endblock %} 